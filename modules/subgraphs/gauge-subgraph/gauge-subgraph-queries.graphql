query GaugeLiquidityGauges(
    $first: Int = 1000
    $orderBy: LiquidityGauge_orderBy
    $orderDirection: OrderDirection
    $skip: Int = 0
    $where: LiquidityGauge_filter
) {
    liquidityGauges(skip: $skip, first: $first, orderBy: $orderBy, orderDirection: $orderDirection, where: $where) {
        ...Gauge
    }
}

fragment Gauge on LiquidityGauge {
    id
    poolId
    totalSupply
    tokens {
        id
        decimals
        symbol
        rate
        periodFinish
    }
    shares {
        user {
            id
        }
        balance
    }
    streamer
    isPreferentialGauge
    isKilled
}

query Pools(
    $block: Block_height
    $first: Int = 100
    $orderBy: Pool_orderBy
    $orderDirection: OrderDirection
    $skip: Int = 0
    $where: Pool_filter
) {
    pools(
        block: $block
        first: $first
        skip: $skip
        orderBy: $orderBy
        orderDirection: $orderDirection
        where: $where
    ) {
        poolId
        preferentialGauge {
            id
        }
        gauges {
            ...Gauge
        }
        gaugesList
    }
}

query GaugeLiquidityGaugeAddresses {
    liquidityGauges {
        id
    }
}

query GaugeUserGauges($userAddress: ID!) {
    user(id: $userAddress) {
        id
        gaugeShares {
            balance
            gauge {
                id
                poolId
                tokens {
                    id
                    decimals
                    symbol
                    rate
                    periodFinish
                }
                isPreferentialGauge
                isKilled
            }
        }
    }
}

query GaugeShares(
    $block: Block_height
    $first: Int = 100
    $orderBy: GaugeShare_orderBy
    $orderDirection: OrderDirection
    $skip: Int = 0
    $where: GaugeShare_filter
) {
    gaugeShares(
        block: $block
        first: $first
        skip: $skip
        orderBy: $orderBy
        orderDirection: $orderDirection
        where: $where
    ) {
        ...GaugeShare
    }
}

fragment GaugeShare on GaugeShare {
    id
    balance
    gauge {
        id
        poolId
        poolAddress
        isPreferentialGauge
        isKilled
    }
    user {
        id
    }
}

query GaugeGetMeta {
    meta: _meta {
        block {
            number
        }
        deployment
        hasIndexingErrors
    }
}

query VotingEscrowLocks(
    $block: Block_height
    $first: Int = 100
    $orderBy: VotingEscrowLock_orderBy
    $orderDirection: OrderDirection
    $skip: Int = 0
    $where: VotingEscrowLock_filter
) {
    votingEscrowLocks(
        block: $block
        first: $first
        skip: $skip
        orderBy: $orderBy
        orderDirection: $orderDirection
        where: $where
    ) {
        id
        lockedBalance
        user {
            id
        }
    }
}

query GaugesInfo($poolIds: [Bytes!]) {
    liquidityGauges(
        where: { poolId_in: $poolIds, gauge_not: null }
        # TODO: add pagination
        first: 1000
    ) {
        id
        poolId
        isKilled
        relativeWeightCap
        gauge {
            addedTimestamp
        }
    }
}

query GaugeStreamers($poolIds: [Bytes!]) {
    liquidityGauges(
        where: { poolId_in: $poolIds }
        # TODO: add pagination
        first: 1000
    ) {
        id
        poolId
        streamer
    }
}

query RootGaugesInfo($recipients: [Bytes!], $chain: Chain!) {
    rootGauges(
        where: { recipient_in: $recipients, chain: $chain, gauge_not: null }
        # TODO: add pagination
        first: 1000
    ) {
        id
        isKilled
        relativeWeightCap
        gauge {
            addedTimestamp
        }
    }
}
